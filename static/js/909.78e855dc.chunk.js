"use strict";(self.webpackChunkelenchus=self.webpackChunkelenchus||[]).push([[909],{2870:function(e,n,t){t.d(n,{Z:function(){return F}});var r=t(5250),i=t(499),o=t(2793),s=t(4162),a=t(8288),l=t(7772),c=t(8553),d=t(2898),u=t(8045),m=t(9911),p=t(7243),x=t(5538),f=t(1813),v=t(7484),h=t(7932),b=t(7790),g=t(1969),j=t(6417),y={FILE:{dir:b.Pk,gen:h.gM,pdf:v.gS,doc:f.Mf,ppt:x.WO,xls:p.ic,zip:m.gA,vid:u.hv,img:d.Oi,aud:c.FM,src:l.w4,txt:a.nf,note:s.Yk},BOX:{FILE:o.Pk,DATAROOM:o.Pk,TEMPORARY:o.Pk},GENERAL:{MENU:i.Uw,SEARCH:r.Y$}};function F(e){return e.type&&e.icon?(0,j.jsx)(g.G,{icon:y[e.type][e.icon],size:"lg"}):(0,j.jsx)(j.Fragment,{})}},6909:function(e,n,t){t.r(n),t.d(n,{FileList:function(){return y},FileListContext:function(){return j},FileListEmpty:function(){return c},FileListResolver:function(){return l},default:function(){return F}});var r=t(9439),i=t(7313),o=t(7890),s=t(4366),a=t(6417);function l(){var e=(0,o.TH)().state,n=(0,o.UO)(),t=(0,i.useState)([]),l=(0,r.Z)(t,2),c=l[0],d=l[1],u=(0,i.useState)(),m=(0,r.Z)(u,2),p=m[0],x=m[1],f=(0,i.useState)([]),v=(0,r.Z)(f,2),h=v[0],b=v[1],g=(0,i.useState)(),j=(0,r.Z)(g,2),F=j[0],k=j[1];return(0,i.useEffect)((function(){k(!0);var t=function(e){b((function(){return e.entries})),k(!1)};s.N6.getBox(n.boxId,(function(r){if(r.id=n.boxId,x(r),b(r.rootFolder.entries),d([{id:r.rootFolder.id,name:r.rootFolder.name}]),e){var i=e,o=i.folderId,a=i.breadcrumbs;o?(d(a),s.N6.getBoxChildren(n.boxId,o,t)):k(!1)}else k(!1)}))}),[n.boxId,e]),F?(0,a.jsx)("p",{children:"loading box..."}):null!==p&&void 0!==p&&p.id&&h?(0,a.jsx)(y,{items:h,box:p,breadcrumbs:c}):(0,a.jsx)("p",{children:"loading items..."})}function c(){return(0,a.jsx)("div",{className:"alert alert-secondary",role:"alert",children:"Nothing here yet"})}var d=t(3433);function u(e){var n=(0,o.s0)();return(0,a.jsx)("nav",{className:"flex my-4","aria-label":"breadcrumb",children:(0,a.jsxs)("ol",{className:"flex items-center space-x-4",children:[(0,a.jsx)("li",{className:"cursor-pointer font-mono",onClick:function(){n("/box/")},children:(0,a.jsx)("span",{className:"text-gray-800",children:"/ home"})}),e.items.map((function(n,t){return(0,a.jsx)("li",{className:"cursor-pointer font-mono",onClick:function(){!function(n,t){var r;e.setItems((function(){return e.items.slice(0,t)})),null===(r=e.onClick)||void 0===r||r.call(e,n.id,n.name)}(n,t)},children:(0,a.jsxs)("span",{className:"text-gray-800",children:["/ ",n.name]})},t)}))]})})}var m=t(2870),p={vid:["mp4","mov","mkv","webm","avi"],aud:["mp3","wav","flac","ogg"],img:["png","jpg","jpeg","bmp","gif","svg"],pdf:["pdf"],txt:["txt"],src:["conf","js","java","css","html","src","class","c","sh","php"],doc:["doc","docx","dotx"],xls:["xls","xlsx","xlsm"],ppt:["ppt","pptx","pps","ppsx"],odx:["odt","odp","ods"],zip:["zip","7z","rar"]};function x(e){return(0,a.jsx)("span",{className:"node-list-item-icon ml-3 mr-2 h-6",children:(0,a.jsx)(m.Z,{type:"FILE",icon:function(e,n){if("DIR"===e)return"dir";if("NOTE"===e)return"note";var t,r,i=null===n||void 0===n||null===(t=n.split("."))||void 0===t||null===(r=t.pop())||void 0===r?void 0:r.toLowerCase();for(var o in p)if(p[o].indexOf(i)>=0)return o;return"gen"}(e.type,e.name)})})}var f=t(6723),v=(0,i.memo)((function(e){var n=(0,i.useState)(!1),t=(0,r.Z)(n,2),o=t[0],s=t[1],l=(0,i.useContext)(j).onHandleSelected,c=f.op.FILE;return(0,a.jsxs)("li",{className:"h-12 cursor-pointer p-4 bg-white",children:[(0,a.jsx)("input",{className:"h-4 w-4 rounded border-gray-300",type:"checkbox",checked:o,"aria-label":"selected",onChange:function(n){n.stopPropagation(),null===l||void 0===l||l({type:!1===o?"add":"remove",id:e.id}),s((function(e){return!o}))}}),(0,a.jsx)(x,{type:e.type||c,name:e.name||"gen"}),(0,a.jsx)("label",{className:"node-list-item-name cursor-pointer",onClick:function(n){var t,r;"DIR"===e.type?null===(t=e.onHandleFolder)||void 0===t||t.call(e,e.id,e.name):"FILE"===e.type&&(null===(r=e.onHandleFile)||void 0===r||r.call(e,e.id,e.name))},children:e.name})]})})),h={NOTE:0,FILE:1,DIR:2};var b=(0,i.memo)((function(e){var n=(0,i.useCallback)((function(e,n){console.log(n)}),[]);return(0,a.jsx)("ul",{className:"divide-y shadow",children:e.items.sort((function(e,n){return h[n.type]-h[e.type]||e.name.localeCompare(n.name)})).map((function(t){return(0,a.jsx)(v,{id:t.id,type:t.type,name:t.name,onHandleFile:n,onHandleFolder:e.onHandleFolder},t.id)}))})})),g=function(e,n){switch(n.type){case"add":return[].concat((0,d.Z)(e),[n.id]);case"remove":return e.filter((function(e){return e!==n.id}));case"clear":return[];default:return e}},j=i.createContext({});function y(e){var n=(0,i.useState)(e.items),t=(0,r.Z)(n,2),o=t[0],l=t[1],d=(0,i.useState)(!1),m=(0,r.Z)(d,2),p=m[0],x=m[1],f=(0,i.useState)(e.breadcrumbs),v=(0,r.Z)(f,2),h=v[0],y=v[1],F=(0,i.useReducer)(g,[]),k=(0,r.Z)(F,2)[1],N=(0,i.useCallback)(k,[k]),C=(0,i.useCallback)((function(n,t){y((function(e){return e.concat({id:n,name:t})})),k({type:"clear"}),x(!0),s.N6.getBoxChildren(e.box.id,n,(function(e){l(e.entries),x(!1)}))}),[e.box.id]),I=(0,i.useMemo)((function(){return{box:e.box,onHandleSelected:N}}),[N,e.box]);return(0,a.jsx)(i.StrictMode,{children:(0,a.jsx)(j.Provider,{value:I,children:(0,a.jsxs)("div",{children:[(0,a.jsx)(u,{items:h,onClick:C,setItems:y}),0===o.length?(0,a.jsx)(c,{}):p?(0,a.jsx)("p",{children:"loading items..."}):(0,a.jsx)(b,{items:o,onHandleFolder:C})]})})})}var F=l}}]);