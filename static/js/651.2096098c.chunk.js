"use strict";(self.webpackChunkelenchus=self.webpackChunkelenchus||[]).push([[651],{2870:function(e,n,t){t.d(n,{Z:function(){return y}});var o=t(5250),i=t(499),a=t(2793),r=t(4162),s=t(8288),c=t(7772),u=t(8553),l=t(2898),d=t(8045),f=t(9911),p=t(7243),v=t(5538),m=t(1813),x=t(7484),h=t(7932),g=t(7790),I=t(1969),b=t(6417),j={FILE:{dir:g.Pk,gen:h.gM,pdf:x.gS,doc:m.Mf,ppt:v.WO,xls:p.ic,zip:f.gA,vid:d.hv,img:l.Oi,aud:u.FM,src:c.w4,txt:s.nf,note:r.Yk},BOX:{FILE:a.Pk,DATAROOM:a.Pk,TEMPORARY:a.Pk},GENERAL:{MENU:i.Uw,SEARCH:o.Y$}};function y(e){return e.type&&e.icon?(0,b.jsx)(I.G,{icon:j[e.type][e.icon],size:"lg"}):(0,b.jsx)(b.Fragment,{})}},2651:function(e,n,t){t.r(n),t.d(n,{FileList:function(){return C},FileListContext:function(){return w},FileListEmpty:function(){return u},FileListResolver:function(){return c},default:function(){return N}});var o=t(9439),i=t(7313),a=t(7890),r=t(3134),s=t(6417);function c(){var e=(0,a.TH)().state,n=(0,a.UO)(),t=(0,i.useState)([]),c=(0,o.Z)(t,2),u=c[0],l=c[1],d=(0,i.useState)(),f=(0,o.Z)(d,2),p=f[0],v=f[1],m=(0,i.useState)([]),x=(0,o.Z)(m,2),h=x[0],g=x[1],I=(0,i.useState)(),b=(0,o.Z)(I,2),j=b[0],y=b[1];return(0,i.useEffect)((function(){y(!0);var t=function(e){g((function(){return e.entries})),y(!1)};r.N6.getBox(n.boxId,(function(o){if(o.id=n.boxId,v(o),g(o.rootFolder.entries),l([{id:o.rootFolder.id,name:o.rootFolder.name}]),e){var i=e,a=i.folderId,s=i.breadcrumbs;a?(l(s),r.N6.getBoxChildren(n.boxId,a,t)):y(!1)}else y(!1)}))}),[n.boxId,e]),j?(0,s.jsx)("p",{children:"loading box..."}):null!==p&&void 0!==p&&p.id&&h?(0,s.jsx)(C,{items:h,box:p,breadcrumbs:u}):(0,s.jsx)("p",{children:"loading items..."})}function u(){return(0,s.jsx)("div",{className:"alert alert-secondary",role:"alert",children:"Nothing here yet"})}var l=t(3433);function d(e){var n=(0,a.s0)();return(0,s.jsx)("nav",{className:"flex my-4","aria-label":"breadcrumb",children:(0,s.jsxs)("ol",{className:"flex items-center space-x-4",children:[(0,s.jsx)("li",{className:"cursor-pointer font-mono",onClick:function(){n("/box/")},children:(0,s.jsx)("span",{className:"text-gray-800",children:"/ home"})}),e.items.map((function(n,t){return(0,s.jsx)("li",{className:"cursor-pointer font-mono",onClick:function(){!function(n,t){var o;e.setItems((function(){return e.items.slice(0,t)})),null===(o=e.onClick)||void 0===o||o.call(e,n.id,n.name)}(n,t)},children:(0,s.jsxs)("span",{className:"text-gray-800",children:["/ ",n.name]})},t)}))]})})}var f=t(2870),p={vid:["mp4","mov","mkv","webm","avi"],aud:["mp3","wav","flac","ogg"],img:["png","jpg","jpeg","bmp","gif","svg"],pdf:["pdf"],txt:["txt"],src:["conf","js","java","css","html","src","class","c","sh","php"],doc:["doc","docx","dotx"],xls:["xls","xlsx","xlsm"],ppt:["ppt","pptx","pps","ppsx"],odx:["odt","odp","ods"],zip:["zip","7z","rar"]};function v(e){return(0,s.jsx)("span",{className:"node-list-item-icon ml-3 mr-2 h-6",children:(0,s.jsx)(f.Z,{type:"FILE",icon:function(e,n){if("DIR"===e)return"dir";if("NOTE"===e)return"note";var t,o,i=null===n||void 0===n||null===(t=n.split("."))||void 0===t||null===(o=t.pop())||void 0===o?void 0:o.toLowerCase();for(var a in p)if(p[a].indexOf(i)>=0)return a;return"gen"}(e.type,e.name)})})}var m=t(6723),x=(0,i.memo)((function(e){var n=(0,i.useState)(!1),t=(0,o.Z)(n,2),a=t[0],r=t[1],c=(0,i.useContext)(w).onHandleSelected,u=m.op.FILE;return(0,s.jsxs)("li",{className:"h-12 cursor-pointer p-4 bg-white",children:[(0,s.jsx)("input",{className:"h-4 w-4 rounded border-gray-300",type:"checkbox",checked:a,"aria-label":"selected",onChange:function(n){n.stopPropagation(),null===c||void 0===c||c({type:!1===a?"add":"remove",id:e.id}),r((function(e){return!a}))}}),(0,s.jsx)(v,{type:e.type||u,name:e.name||"gen"}),(0,s.jsx)("label",{className:"node-list-item-name",onClick:function(n){var t,o;"DIR"===e.type?null===(t=e.onHandleFolder)||void 0===t||t.call(e,e.id,e.name):"FILE"===e.type&&(null===(o=e.onHandleFile)||void 0===o||o.call(e,e.id,e.name))},children:e.name})]})})),h={NOTE:0,FILE:1,DIR:2};var g=t(5554),I=t(1881),b=t.n(I);b().interceptors.request.use((function(e){return e.headers||(e.headers={}),e.headers["X-IDGARD-CSFR"]=""+localStorage.getItem("csfrToken"),e}),(function(e){return Promise.reject(e)})),b().interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status&&"NoSessionException"===e.response.data.error&&(window.location.href=window.location.origin+"/login",localStorage.removeItem("csfrToken")),Promise.reject(e)}));var j=b(),y={login:function(e,n,t){j.post("/uiapi/AccountsAPI/v1/rest/login/",e).then((function(e){null===n||void 0===n||n(e.data)})).catch((function(e){null===t||void 0===t||t(e.response.data)}))},logout:function(e,n){j.post("/uiapi/AccountsAPI/v1/rest/logout?opt=THIS").then((function(n){null===e||void 0===e||e(n.data)})).catch((function(e){null===n||void 0===n||n(e.response.data)}))},getBox:function(e,n,t){j.get("/uiapi/BoxAPI/v1/rest/boxes/"+e,{}).then((function(e){null===n||void 0===n||n(e.data)})).catch((function(e){null===t||void 0===t||t(e.response.data)}))},getBoxChildren:function(e,n,t,o){j.get("/uiapi/BoxAPI/v1/rest/children/"+e+"/"+n,{}).then((function(e){null===t||void 0===t||t(e.data)})).catch((function(e){null===o||void 0===o||o(e.response.data)}))},getDownloadId:function(e,n,t,o){j.post("/uiapi/FileAPI/v1/rest/gdid?"+(null==n?"":"&override="+encodeURIComponent(n)),e).then((function(e){null===t||void 0===t||t(e.data)})).catch((function(e){null===o||void 0===o||o(e.response.data)}))},findItemsInBox:function(e,n,t,o,i){j.get("/uiapi/FilterAPI/v1/rest/boxes/"+e+"/nodes?"+n+"&"+t).then((function(e){null===o||void 0===o||o(e.data)})).catch((function(e){null===i||void 0===i||i(e.response.data)}))},getClientConfiguration:function(e,n){j.get("/uiapi/AccountsAPI/v1/rest/configuration").then((function(n){null===e||void 0===e||e(n.data)})).catch((function(e){null===n||void 0===n||n(e.response.data)}))},getUser:function(e,n,t){j.get("/uiapi/UserManagementAPI/v1/rest/users/"+e).then((function(e){null===n||void 0===n||n(e.data)})).catch((function(e){null===t||void 0===t||t(e.response.data)}))},paginateBox:function(e,n,t,o){j.get("/uiapi/BoxAPI/v1/rest/partial_boxes?nbBoxes="+(e-1)+"&offset="+n).then((function(e){null===t||void 0===t||t(e.data)})).catch((function(e){null===o||void 0===o||o(e.response.data)}))},paginateUser:function(e,n,t,o){j.get("/uiapi/UserManagementAPI/v1/rest/users_partial?limit="+e+"&offset="+n).then((function(e){null===t||void 0===t||t(e.data)})).catch((function(e){null===o||void 0===o||o(e.response.data)}))},getPasswordPolicy:function(e,n){j.get("/uiapi/EnterpriseAPI/v1/rest/settings/password").then((function(n){null===e||void 0===e||e(n.data)})).catch((function(e){null===n||void 0===n||n(e.response.data)}))},getBoxSettings:function(e,n){j.get("/uiapi/EnterpriseAPI/v1/rest/settings/box").then((function(n){null===e||void 0===e||e(n.data)})).catch((function(e){null===n||void 0===n||n(e.response.data)}))},getSoftwareSettings:function(e,n){j.get("/uiapi/EnterpriseAPI/v1/rest/settings/software").then((function(n){null===e||void 0===e||e(n.data)})).catch((function(e){null===n||void 0===n||n(e.response.data)}))},getDefaultSessionTimeout:function(e,n){j.get("/uiapi/EnterpriseAPI/v1/rest/settings/session").then((function(n){null===e||void 0===e||e(n.data)})).catch((function(e){null===n||void 0===n||n(e.response.data)}))}},P=y,A=t(7135);var F=(0,i.memo)((function(e){var n=(0,g.v9)(A.Zb),t=(0,i.useCallback)((function(e,t){var o=[{itemId:e,itemName:t}];P.getDownloadId(o,null,(function(e){!function(e,n){var t="/uiapi/FileAPI/v1/rest/dnld?downloadId="+e+"&type=''&csfr="+n;window.location.href=t}(e,n.csfrToken)}))}),[n.csfrToken]);return(0,s.jsx)("ul",{className:"divide-y shadow",children:e.items.sort((function(e,n){return h[n.type]-h[e.type]||e.name.localeCompare(n.name)})).map((function(n){return(0,s.jsx)(x,{id:n.id,type:n.type,name:n.name,onHandleFile:t,onHandleFolder:e.onHandleFolder},n.id)}))})})),k=function(e,n){switch(n.type){case"add":return[].concat((0,l.Z)(e),[n.id]);case"remove":return e.filter((function(e){return e!==n.id}));case"clear":return[];default:return e}},w=i.createContext({});function C(e){var n=(0,i.useState)(e.items),t=(0,o.Z)(n,2),a=t[0],c=t[1],l=(0,i.useState)(!1),f=(0,o.Z)(l,2),p=f[0],v=f[1],m=(0,i.useState)(e.breadcrumbs),x=(0,o.Z)(m,2),h=x[0],g=x[1],I=(0,i.useReducer)(k,[]),b=(0,o.Z)(I,2)[1],j=(0,i.useCallback)(b,[b]),y=(0,i.useCallback)((function(n,t){g((function(e){return e.concat({id:n,name:t})})),b({type:"clear"}),v(!0),r.N6.getBoxChildren(e.box.id,n,(function(e){c(e.entries),v(!1)}))}),[e.box.id]),P=(0,i.useMemo)((function(){return{box:e.box,onHandleSelected:j}}),[j,e.box]);return(0,s.jsx)(i.StrictMode,{children:(0,s.jsx)(w.Provider,{value:P,children:(0,s.jsxs)("div",{children:[(0,s.jsx)(d,{items:h,onClick:y,setItems:g}),0===a.length?(0,s.jsx)(u,{}):p?(0,s.jsx)("p",{children:"loading items..."}):(0,s.jsx)(F,{items:a,onHandleFolder:y})]})})})}var N=c}}]);